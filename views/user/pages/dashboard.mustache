<html lang="en">
   <head>
        {{>header}}
   </head>
   <nav class="navbar navbar-expand-md" style="background-color: #ffe4f4;"> <!-- was  #e3f2fd -->
    <div class="container-fluid">
    <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
        <ul class="navbar-nav me-auto"> <!--was mr -->
            <a class="navbar-brand" href="#" style="font-size:1.75rem">
            <img src="images/phone_icon.ico" width="30" height="30" alt="a picture of the Trackfriends logo">
            TrackFriend
            </a>
            <li class="nav-item my-auto">
                <a class="nav-link active" href="/dashboard">Dashboard</a>
            </li>
            <li class="nav-item my-auto">
                <a class="nav-link" href="/achievements">Achievements</a>
            </li>
            <li class="nav-item my-auto">
                <a class="nav-link" href="/goals">Goals centre</a>
            </li>
            <li class="nav-item my-auto">
                <a class="nav-link" href="#">About us</a>
            </li>
        </ul>
        </div>
    <div class="navbar-collapse collapse w-100 order-2 dual-collapse2"> <!-- was order 3 -->
    <ul class="navbar-nav ms-auto">
        {{^user}}
            <li class="nav-item">
                <a class="nav-link " id="login" href="/login">Sign in</a>
            </li>
            
            <li class="nav-item">
                <a class="btn btn-primary" id="register" href="/register">Register</a> <!-- might remove the btn -->
            </li> 
        {{/user}}
        {{#user}} <!-- if there's a user -->
            <li class="nav-item">
                <a class="nav-link btn btn-primary" href="/logout">Sign out</a> <!-- might remove the btn -->
            </li>
        {{/user}}
        </ul>
        </div>
        </div> <!--container-->
    </div>
</nav>
    <body>   
    <div class="card border-0 mx-auto">
        <div class="card-body border-0">
            <h3 class="card-title border-0"> Welcome back {{user_name}}</h3> <h2 class="text-info">Check your activity for today , <a href="/goals" class="text-primary"style="text-decoration:none;">{{day_name}} {{todays_date}}</a></h2>  
             <hr class="mx-auto" style="height:2px; width:100%; border-width:0; color:red; background-color:#6611EE">
        </div>
    </div>
<!-- alert if not having inputted weight info -->
    {{^weight_info}}
  <div class="alert alert-info alert-dismissible fade show" id="weight_alert">
        <strong>Thank you for registering!</strong> You should consider adding additional information to your profile, such as your weight, please do so at your own time by clicking <a href="/addinfo">Here</a>
        <button type="button" class="btn-close" data-bs-dismiss="alert" id="closingAlrt"></button>
    </div>
    {{/weight_info}}
    <!-- content -->
    
    <div class="row">
        <div class="col-sm-5">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Activity overview</h5>
                <!-- no goals == image and create a goal button -->
                {{^goals}}
                    <div class="bg-image">
                        <img src="images/run_start.jpg" class="w-100" />
                        <div class="mask">
                            <div class="text">
                            <p>Start with the right foot, set a goal!</p>
                            </div>
                        </div>
                    </div>
                
                <br> <a href="/goals" class="btn btn-primary">Set a goal!</a>
                {{/goals}}                 
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Sleep</h5>
                    <!-- image of Sleep -->
                    <div class="bg-image mx-auto">
                        <img src="icons/sleep.png" class="w-100" />
                    </div>
                    <br>
                    <!-- progress bar -->
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 75%">50%</div>
                    </div>
                    <br>
                    <a href="#" class="btn btn-primary">modify goals</a>
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Weight loss</h5>
                    <!-- image of weight loss -->
                    <div class="bg-image mx-auto">
                        <img src="icons/weight_loss.png" class="w-100" />
                    </div>
                    <br>
                    <!-- progress bar -->
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 75%">50%</div>
                    </div>
                    <br>
                    <a href="#" class="btn btn-primary">modify goals</a>
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Steps</h5>
                    <!-- image of Steps -->
                    <div class="bg-image mx-auto">
                        <img src="icons/steps.png" class="w-100" />
                    </div>
                    <br>
                    <!-- progress bar -->
                    {{#steps_entry}}
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated steps_progress" role="progressbar" aria-valuenow="{{currentValue}}" aria-valuemin="0" aria-valuemax="{{endValue}}" style="width: 75%"></div>
                    </div>
                    <a class="text-dark" id="to_steps_goal" href="#" style="text-decoration:none;">{{currentValue}} out of {{endValue}} Steps </a> <p class="text-info">keep going!</p>
                    {{/steps_entry}}
                    <!-- no goal entry for steps, shows default -->
                    {{^steps_entry}}
                    <div class="progress">
                        <div id="steps_progress" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 75%">50%</div>
                    </div>
                    {{/steps_entry}}
                    <br>
                    <a href="/goals/{{todays_date}}/steps" class="btn btn-primary">modify goals</a>
                </div>
            </div>
        </div>
      </div>
  </div>
   <footer class="bg-light text-center text-white">
  <!-- Grid container -->
  <div class="container p-4 pb-0">
    <!-- Section: Social media -->
    <section class="mb-4">
      <!-- Facebook -->
      <a
        class="btn text-white btn-floating m-1"
        style="background-color: #3b5998;"
        href="#!"
        role="button"
        ><i class="fab fa-facebook-f"></i
      ></a>

      <!-- Twitter -->
      <a
        class="btn text-white btn-floating m-1"
        style="background-color: #55acee;"
        href="#!"
        role="button"
        ><i class="fab fa-twitter"></i
      ></a>

      <!-- Google -->
      <a
        class="btn text-white btn-floating m-1"
        style="background-color: #dd4b39;"
        href="#!"
        role="button"
        ><i class="fab fa-google"></i
      ></a>

      <!-- Instagram -->
      <a
        class="btn text-white btn-floating m-1"
        style="background-color: #ac2bac;"
        href="#!"
        role="button"
        ><i class="fab fa-instagram"></i
      ></a>

      <!-- Linkedin -->
      <a
        class="btn text-white btn-floating m-1"
        style="background-color: #0082ca;"
        href="#!"
        role="button"
        ><i class="fab fa-linkedin-in"></i
      ></a>
      <!-- Github -->
      <a
        class="btn text-white btn-floating m-1"
        style="background-color: #333333;"
        href="#!"
        role="button"
        ><i class="fab fa-github"></i
      ></a>
    </section>
    <!-- Section: Social media -->
  </div>
  <!-- Grid container -->

  <!-- Copyright -->
  <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
    Â© 2023 , with current date: <b id="active_date">{{todays_date}}</b>
  </div>
  <!-- Copyright -->
</footer>
    <script>
    //alert handling
    let alert_x =document.getElementById("closingAlrt");
    let alert_element =document.getElementById("weight_alert");
    alert_x.addEventListener("click", function(){
        alert_element.classList.remove("show");
        alert_element.remove();
    })
    let valuesteps = document.getElementsByClassName("steps_progress")[0];
    let currentValue = valuesteps.getAttribute("aria-valuenow");
    let maxValue = valuesteps.getAttribute("aria-valuemax");
    let percentage = (100 * currentValue)/maxValue +"%";
    let styleFormat = "width: "+percentage+";"
    valuesteps.setAttribute("style",styleFormat);
    valuesteps.innerText = percentage;

    let stepsLabel = document.getElementById("to_steps_goal");
    let date = document.getElementById("active_date").innerText;
    link_to_steps = "/goals"+"/"+date+"/"+"steps";
    stepsLabel.setAttribute("href",link_to_steps);
    </script>
    </body>
</html>